<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link type="text/css" href="/stylesheets/ui-lightness/jquery-ui-1.8.2.custom.css" rel="Stylesheet" />	
    <style type="text/css" title="currentStyle">
      @import "/stylesheets/demo_page.css";
      @import "/stylesheets/demo_table.css";
    </style>
    <style type="text/css">
		  body { font-size: 62.5%; }
		  label, input { display:block; }
		  input.text { margin-bottom:12px; width:95%; padding: .4em; }
		  fieldset { padding:0; border:0; margin-top:25px; }
		  h1 { font-size: 1.2em; margin: .6em 0; }
		  div#users-contain { width: 350px; margin: 20px 0; }
		  div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
		  div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
		  .ui-dialog .ui-state-error { padding: .3em; }
		  .validateTips { border: 1px solid transparent; padding: 0.3em; }
	  </style>
    <script src="/javascripts/jquery-1.4.2.js" type="text/javascript"></script>
    <script src="/javascripts/jquery.dataTables.js" type="text/javascript"></script>
    <script type="text/javascript" src="/javascripts/jquery-ui-1.8.2.custom.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.ui.datepicker-da.js"></script>
    <script type="text/javascript" charset="utf-8">
        var oTable;
        $(document).ready(function() {

        oTable = $('#example').dataTable( {
          "bJQueryUI": false,
          "sPaginationType": "full_numbers",
          //"sDom": '<"top"i>rt<"bottom"flp<"clear">',
          "bAutoWidth": false, 
          "bProcessing": true,
          //
          "aoColumnDefs": [
			        { "sWidth": "1em", "sClass": 'left', "aTargets": [ 0 ] },
			        { "sClass": 'left', "sTitle": "Fulde navn", "aTargets": [ 1 ] },
			        { "sClass": 'left', "aTargets": [ 2 ] },
			        { "sWidth": "3em", "sClass": 'left', "sTitle": "Pnr", "aTargets": [ 3 ] },
			        { "sWidth": "7em", "sClass": 'left', "bVisible": true, "aTargets": [ 4 ] },
			        { "sWidth": "5em", "sClass": 'left', "aTargets": [ 5 ] }
		      ],
          //
          "fnInitComplete":function( oSettings, json ) {
            $(oSettings.aoData).each( function() {
              var id = $(this)[0]._aData[0];
              var nRow = $(this)[0].nTr;
              $(nRow).attr("id",id);
              $(nRow).click( function(){
                var aPos = oTable.fnGetPosition( this ); 
                medlemUpdate(aPos)
              });
            });
          },
          /*
          "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
            var id = aData[0];
            $(nRow).attr("id",id);
            if ( $.data( $(nRow).get(0), 'events' ) === null  || ( $.data( $(nRow).get(0), 'events' ) !== null && $.data( $(nRow).get(0), 'events' ).click === null ) )
            {
              $(nRow).click( function() { alert('this: ' + $(this)[0].outerHTML); } );
            }
            var foo2 = $.data( $(nRow).get(0), 'events' ).click;
            return nRow;
          },
          */
          "sAjaxSource": "/adm/medlemjson"
        } );

        //$('#example tbody').click(function(){ 
        //  alert('this: ' + $(this)[0].outerHTML); 
        //}); 

        $('.mogens').click(function(){ 
          var testmha = oTable;
          mhatest();
          //alert('outerHTML: ' + $(this)[0].outerHTML); 
        });      

        /* Hide the 6'th column after initialisation*/
        //oTable.fnSetColumnVis( 5, false );
        
        //$('#mySliderDiv').slider({ 
        //  orientation: 'horisontal',
        //  min: 0,
        //  max: 150,
        //  value: 50 });
      
        $("#dialog-form").dialog({
          autoOpen: false,
			    modal: true,
			    buttons: {
				    Ok: function() {
 				      var pos = $("#pos").val();
              oTable.fnUpdate( [$("#nr").val(),$("#navn").val(),$("#adresse").val(),$("#postnr").val(),$("#bynavn").val(),$("#telefon").val()], pos, 0); 
              $(this).dialog('close');
				    }
			    }
		    });
        //$.datepicker.setDefaults($.datepicker.regional['da']); 
        $('#name').datepicker({
           changeMonth: true,
           changeYear: true});
       
        $('#mybutton').button().click(function(){
          $("#nr").val('123');
          $("#navn").val('Mogens Hafsjold');
          $("#adresse").val('Nørremarken 31');
          $("#postnr").val('3060');
          $("#bynavn").val('Espergærde');
          $("#telefon").val('4913 3540');
     		  $("#dialog-form").dialog('open');
        }); 

      });                
      
      function medlemUpdate(aPos) {
        var aData = oTable.fnGetData( aPos ); 
        $("#pos").val(aPos);
        $("#nr").val(aData[0]);
        $("#navn").val(aData[1]);
        $("#adresse").val(aData[2]);
        $("#postnr").val(aData[3]);
        $("#bynavn").val(aData[4]);
        $("#telefon").val(aData[5]);
   	    $("#dialog-form").dialog('open');
      } 
      
      
      function mhatest(){ 
          var xRow = oTable.dataTableSettings[0].aoData[0].nTr;
          var xEvents = $.data( $(xRow).get(0), 'events' )
          alert('testmha'); 
      }
    </script>
    <title>Find Medlem</title>
  </head>
  <body id="dt_example">
    <button id="mybutton">mybutton</button>
    
    <div class="mogens">
      <a id="mhaTest1234" ref=#>Test</a>
    </div>
    
    <div id="dynamic">
      <table width="850px" cellpadding="0" cellspacing="0" border="0" class="display" id="example">
        <thead>
          <tr >
            <th>Nr</th>
            <th>Navn</th>
            <th>Adresse</th>
            <th>Postnr</th>
            <th>By</th>
            <th>Telefon</th>
          </tr>
        </thead>          
        <tbody>
        </tbody>  
      </table>
    </div>
    
    <div id="dialog-form" title="Update user">
	    <form>
	      <fieldset>
		      <input type="hidden" name="pos" id="pos"/>
		      <label for="nr">Nr</label>
		      <input type="text" name="nr" id="nr" class="text ui-widget-content ui-corner-all" />
		      <label for="navn">Navn</label>
		      <input type="text" name="navn" id="navn" class="text ui-widget-content ui-corner-all" />
		      <label for="adresse">Adresse</label>
		      <input type="text" name="adresse" id="adresse" value="" class="text ui-widget-content ui-corner-all" />
		      <label for="postnr">Postnr</label>
		      <input type="text" name="postnr" id="postnr" value="" class="text ui-widget-content ui-corner-all" />
		      <label for="bynavn">By</label>
		      <input type="text" name="bynavn" id="bynavn" value="" class="text ui-widget-content ui-corner-all" />
		      <label for="telefon">Telefon</label>
		      <input type="text" name="telefon" id="telefon" value="" class="text ui-widget-content ui-corner-all" />
	      </fieldset>
	    </form>
    </div>
  </body>
</html>
